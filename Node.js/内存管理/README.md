# 内存管理

## 内存模型

![内存模型](./01.png)

Node.js 程序在运行时所占用的内存称为**常驻内存**。

常驻内存由以下部分组成：

- 代码区：程序代码。
- 栈：局部变量。
- 堆：对象、闭包上下文。
- 堆外内存：Buffer 数据。

## 内存回收

栈的内存回收非常直接，当程序离开某作用域后，其栈指针下移（回退），然后整个作用域的局部变量都会出栈，内存完成回收。

堆的内存回收则通过 V8 的垃圾回收机制进行管理。

- 垃圾标记算法：可达性分析算法。
- 垃圾回收算法：分代收集算法。
